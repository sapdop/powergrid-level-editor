(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,n,t){e.exports=t(47)},36:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),c=(t(36),t(4)),s=t(5),l=t(7),u=t(6),d=t(8),f=t(12),h=t(3),m=t(9),g=t(10);function p(){var e=Object(m.a)(["\n  padding: .5em;\n  font-size: .8rem;\n  text-align: center;\n  resize: none;\n  border: none;\n  border-radius: .5rem;\n"]);return p=function(){return e},e}function E(){var e=Object(m.a)(["\n  flex: 1 0;\n  padding: .5em;\n  font-size: .8rem;\n"]);return E=function(){return e},e}function b(){var e=Object(m.a)(["\n  background-color: #fff;\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: .5rem;\n  border: 2px solid #888;\n"]);return b=function(){return e},e}var v=g.a.div(b(),function(e){return e.isEditing?"stretch":"center"},function(e){return e.width},function(e){return e.height}),w=g.a.span(E()),y=g.a.textarea(p()),O=function(e){return i.a.createElement(v,{width:e.model.width,height:e.model.height,isEditing:e.isEditing},i.a.createElement(y,{value:e.name,onChange:e.refreshName,onKeyDown:e.handleKeyPress,innerRef:function(n){return e.handleRef(n)},style:{display:e.isEditing?"block":"none"}}),i.a.createElement(w,{onDoubleClick:function(){return e.toggleEdit(!0)},style:{display:e.isEditing?"none":"block"}},e.model.name))},k=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i)))).state={isEditing:!1,name:t.props.model.name},t.handleRef=function(e){t.textarea||(t.textarea=e)},t.toggleEdit=function(e){var n=Object(h.a)(Object(h.a)(t)).textarea;e&&n&&setTimeout(function(){return n.focus()},64),t.setState({isEditing:e})},t.refreshName=function(e){t.setState({name:e.currentTarget.value})},t.handleKeyPress=function(e){switch(e.key){case"Enter":t.toggleEdit(!1),t.props.setName({id:t.props.model.id,name:t.state.name});break;case"Escape":t.toggleEdit(!1),t.setState({name:t.props.model.name})}},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){return i.a.createElement(O,Object.assign({},this.props,{isEditing:this.state.isEditing,name:this.state.name,toggleEdit:this.toggleEdit,refreshName:this.refreshName,handleKeyPress:this.handleKeyPress,handleRef:this.handleRef}))}}]),n}(i.a.PureComponent),j={path:i.a.createElement("path",{d:"M14 0H2C1 0 0 1 0 2v12c0 1 1 2 2 2h12c1 0 2-1 2-2V2c0-1-1-2-2-2z"}),size:16};function x(){var e=Object(m.a)(["\n  position: absolute;\n  top: 100%;\n  width: 200%;\n  padding: .5em;\n  border: none;\n  font-size: .8rem;\n  text-align: center;\n  border-radius: .1rem;\n  resize: none;\n  z-index: 10;\n  background-color: rgba(255, 255, 255, 0.8);\n"]);return x=function(){return e},e}function N(){var e=Object(m.a)(["\n  position: absolute;\n  top: 100%;\n  width: 200%;\n  padding: .5em;\n  font-size: .8rem;\n"]);return N=function(){return e},e}function C(){var e=Object(m.a)(["\n  background-color: #fff;\n  display: flex;\n  position: relative;\n  flex-flow: row nowrap;\n  align-items: center;\n  width: ","px;\n  height: ","px;\n  border-radius: 77rem;\n  border: 2px solid #888;\n  justify-content: center;\n  font-size: .5rem;\n"]);return C=function(){return e},e}var R=g.a.div(C(),function(e){return e.width},function(e){return e.height}),T=g.a.span(N()),z=g.a.textarea(x()),P=function(e){return i.a.createElement(R,{width:e.model.width,height:e.model.height},i.a.createElement(z,{value:e.name,onChange:e.refreshName,onKeyDown:e.handleKeyPress,innerRef:function(n){return e.handleRef(n)},style:{display:e.isEditing?"block":"none"}}),i.a.createElement(T,{onDoubleClick:function(){return e.toggleEdit(!0)},style:{display:e.isEditing?"none":"block"}},e.model.name))},A=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i)))).state={isEditing:!1,name:t.props.model.name},t.handleRef=function(e){t.textarea||(t.textarea=e)},t.toggleEdit=function(e){var n=Object(h.a)(Object(h.a)(t)).textarea;e&&n&&setTimeout(function(){return n.focus()},64),t.setState({isEditing:e})},t.refreshName=function(e){t.setState({name:e.currentTarget.value})},t.handleKeyPress=function(e){switch(e.key){case"Enter":t.toggleEdit(!1),t.props.setName({id:t.props.model.id,name:t.state.name});break;case"Escape":t.toggleEdit(!1),t.setState({name:t.props.model.name})}},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"componentWillUnmount",value:function(){this.textarea=null}},{key:"render",value:function(){return i.a.createElement(P,Object.assign({},this.props,{isEditing:this.state.isEditing,name:this.state.name,toggleEdit:this.toggleEdit,refreshName:this.refreshName,handleKeyPress:this.handleKeyPress,handleRef:this.handleRef}))}}]),n}(i.a.PureComponent),K={path:i.a.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"}),size:16},S={entityTypes:{Task:{width:125,height:75},Event:{width:50,height:50}},gridSize:25},W={Task:{component:k,icon:j},Event:{component:A,icon:K}},D=(t(43),t(29)),L=[];L.AND=0,L.OR=1,L.NONE=2,L.XOR=3,L.NOR=4,L.NAND=5,L.NOT=6;var B=[],I=[],M=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=Object(l.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(i)))).onHitExport=function(){I.forEach(function(e){B.push(JSON.stringify({gateType:L[e.name],links:e.linksTo?t.getLinkIndices(e.linksTo,I):[]}))})},t.clearBoard=function(){window.location.reload()},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){f.d.dispatch(Object(f.c)(S)),Object(f.b)("anyChange",function(e){return I=e})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(D.CopyToClipboard,{text:B},i.a.createElement("button",{onClick:this.onHitExport},"EXPORT")),i.a.createElement("button",{onClick:this.clearBoard},"CLEAR"),i.a.createElement("div",{className:"main"},i.a.createElement(f.a,{customEntities:W})))}},{key:"getLinkIndices",value:function(e,n){var t=[];return e.forEach(function(e){t.push(n.findIndex(function(n){return n.id===e.target}))}),t}}]),n}(i.a.PureComponent),H=function(e){function n(){return Object(c.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h1",{className:"App-title"},"Power-Grid Level Editor")),i.a.createElement("main",{className:"main"},i.a.createElement(M,null)))}}]),n}(a.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(H,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/powergrid-level-editor",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/powergrid-level-editor","/service-worker.js");J?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):U(e)})}}()}},[[31,2,1]]]);
//# sourceMappingURL=main.54461033.chunk.js.map